!function(){var e,t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};e="http://69.55.49.53",require.config({paths:{underscore:"../components/underscore/underscore",backbone:"../components/backbone/backbone",jquery:"../components/jquery/jquery.min",JSONP:"../js/jsonp"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"}}}),require(["jquery","JSONP","backbone"],function(t,o,r){var i,a,u,c,s,l,p,d,h,g,f,y;return String.prototype.title_case=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},i=function(e){function o(){return d=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.el=t("nav"),o.prototype.render=function(){var e;return e=this.model.current_page(),document.title=""+e.get("name")+" | Chaz Southard",this.$el.find("#"+e.get("slug")+"_nav").prop("checked",!0),console.log("(nav) page: "+e.get("name"))},o.prototype.added_page=function(e){var t,n;return t=e.get("name"),n=e.get("slug"),this.$el.find(".buttonset").append('<input type="radio" name="nav" value="'+n+'", id="'+n+'_nav")>\n<label for="'+n+'_nav">\n	<a href="#'+n+'">'+t+"</a>\n</label>")},o.prototype.initialize=function(){return _.bindAll(this),this.model.on("change:selected",this.render),this.model.on("add",this.added_page)},o}(r.View),s=function(e){function t(){return h=t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.routes={"*page":"change_page"},t.prototype.change_page=function(e){return""!==e?this.model.change_page(e):void 0},t.prototype.initialize=function(e){return this.model=e.model},t}(r.Router),a=function(e){function t(){return g=t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.defaults={name:"",slug:"",selected:!1,first_load:function(){},on_load:function(){},on_unload:function(){}},t.prototype.sync=function(){return!1},t.prototype.onchange=function(){return this.get("selected")?this.get("on_load").call():this.get("on_unload").call()},t.prototype.initialize=function(){return _.bindAll(this),this.on("change:selected",this.onchange),this.get("first_load").call()},t}(r.Model),u=function(e){function o(){return f=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.render=function(){return this.el.style.display=this.model.get("selected")?"block":"none"},o.prototype.initialize=function(){var e;return _.bindAll(this),this.model.on("change:selected",this.render),this.model.view=this,e=this.model.get("slug"),console.log("loaded "+e,window.navView.el),t(window.navView.el).after('<section id="'+e+'_content">\n</section>'),this.el=t("#"+e+"_content")[0],this.render()},o}(r.View),c=function(e){function t(){return y=t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.model=a,t.prototype.default_page="blog",t.prototype.added_page=function(e){return new u({model:e})},t.prototype.change_page=function(e){var t;t=this.find(function(t){return t.get("slug")===e});try{this.current_page().set({selected:!1})}catch(n){}return null!=t?t.set({selected:!0}):(console.log(""+e+" doesn't exist, redirecting to "+this.default_page+"..."),router.navigate(this.default_page,{trigger:!0,replace:!0}))},t.prototype.current_page=function(){return this.where({selected:!0})[0]},t.prototype.initialize=function(){return _.bindAll(this),this.on("add",this.added_page)},t}(r.Collection),window.pages=new c,window.router=new s({model:pages}),window.navView=new i({model:pages}),p=function(){return r.history.start(),""===r.history.fragment?App.Router.navigate(pages.default_page,{trigger:!0,replace:!0}):void 0},l=new o,l.get(""+e+"/?json=get_page_index",{},function(e){var n,o,r,i;for(i=e.pages,o=0,r=i.length;r>o;o++)n=i[o],pages.create({slug:n.slug,name:n.title}),t("#"+n.slug+"_content")[0].innerHTML=n.content;return p()}),pages.create({slug:"blog",name:"Blog"}),l.get(""+e+"/?json=1",{},function(e){var n,o,r,i,a;for(i=e.posts,a=[],o=0,r=i.length;r>o;o++)n=i[o],a.push(t("#blog_content").append('<section>\n	<h1 class="title">'+n.title+'</h1>\n	<span class="author">by '+n.author.name+"</span>\n	"+n.content+"\n</section>"));return a})})}.call(this);