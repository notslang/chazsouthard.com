(function(){var t,e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};t="http://69.55.49.53",window._wpcf7={loaderUrl:t+"/wp-content/plugins/contact-form-7/images/ajax-loader.gif",sending:"Sending ..."},require.config({paths:{underscore:"../components/underscore/underscore",backbone:"../components/backbone/backbone",jquery:"../components/jquery/jquery.min",JSONP:"../js/jsonp",fancybox:"../components/fancybox/jquery.fancybox",contact_form:"../js/contact-form",jquery_form:"../js/jquery.form",uuid:"../js/Math.uuid",gallery:"../js/gallery"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},fancybox:{deps:["jquery"]},contact_form:{deps:["jquery","jquery_form"]}}}),require(["jquery","JSONP","backbone","gallery","fancybox","contact_form"],function(e,o,r,i){var a,u,c,s,l,p,d,h,f,g,y,m,w,v,b;return String.prototype.title_case=function(){return this.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},a=function(t){function o(){return y=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.el=e("nav"),o.prototype.render=function(){var t;return t=this.model.current_page(),document.title=""+t.get("name")+" | Chaz Southard",this.$el.find("#"+t.get("slug")+"_nav").prop("checked",!0),this.$el.find("select").val("#"+t.get("slug")),console.log("(nav) page: "+t.get("name"))},o.prototype.added_page=function(t){var e,n;return e=t.get("name"),n=t.get("slug"),this.$el.find(".buttonset").append('<input type="radio" name="nav" value="'+n+'", id="'+n+'_nav")>\n<label for="'+n+'_nav">\n	<a href="#'+n+'">'+e+"</a>\n</label>"),this.$el.find("select").append('<option value="#'+n+'">'+e+"</option>")},o.prototype.initialize=function(){return _.bindAll(this),this.model.on("change:selected",this.render),this.model.on("add",this.added_page)},o}(r.View),l=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.routes={"*page":"change_page"},e.prototype.change_page=function(t){return""!==t?this.model.change_page(t):void 0},e.prototype.initialize=function(t){return this.model=t.model},e}(r.Router),u=function(t){function e(){return w=e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.defaults={name:"",slug:"",selected:!1,categories:[],first_load:function(){},on_load:function(){},on_unload:function(){}},e.prototype.sync=function(){return!1},e.prototype.onchange=function(){return this.get("selected")?this.get("on_load").call():this.get("on_unload").call()},e.prototype.initialize=function(){return _.bindAll(this),this.on("change:selected",this.onchange),this.get("first_load").call()},e}(r.Model),c=function(t){function o(){return v=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.render=function(){return this.el.style.display=this.model.get("selected")?"block":"none"},o.prototype.initialize=function(){var t,n;return _.bindAll(this),this.model.on("change:selected",this.render),this.model.view=this,n=this.model.get("slug"),console.log("loaded "+n,window.navView.el),t=this.model.get("categories").join(" "),console.log(this.model.get("categories")),e(window.navView.el).after('<section id="'+n+'_content" class="'+t+'">\n</section>'),this.el=e("#"+n+"_content")[0],this.render()},o}(r.View),s=function(t){function e(){return b=e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.model=u,e.prototype.default_page="blog",e.prototype.added_page=function(t){return new c({model:t})},e.prototype.change_page=function(t){var e;e=this.find(function(e){return e.get("slug")===t});try{this.current_page().set({selected:!1})}catch(n){}return null!=e?e.set({selected:!0}):(console.log(""+t+" doesn't exist, redirecting to "+this.default_page+"..."),router.navigate(this.default_page,{trigger:!0,replace:!0}))},e.prototype.current_page=function(){return this.where({selected:!0})[0]},e.prototype.initialize=function(){return _.bindAll(this),this.on("add",this.added_page)},e}(r.Collection),window.pages=new s,window.router=new l({model:pages}),window.navView=new a({model:pages}),window.attachment_index={},f=function(t){var e,n,o,r,i;for(i=[],o=0,r=t.length;r>o;o++)e=t[o],n=e.url,delete e.url,i.push(attachment_index[n]=e);return i},d=0,g=2,h=function(){var n;return d++,d===g?(e("#loading").remove(),r.history.start(),""===r.history.fragment&&App.Router.navigate(pages.default_page,{trigger:!0,replace:!0}),i(),e(".gallery a").fancybox({nextEffect:"fade",prevEffect:"fade",padding:0,margin:[15,15,40,15],afterLoad:function(){var t,n,o,r;if(n=e("#links"),!n.length){for(n=e('<ul id="links">'),t=o=0,r=this.group.length;r>=0?r>o:o>r;t=r>=0?++o:--o)e('<li data-index="'+t+'"><label></label></li>').click(function(){return e.fancybox.jumpto(e(this).data("index"))}).appendTo(n);n.appendTo("body")}return n.find("li").removeClass("active").eq(this.index).addClass("active")},beforeClose:function(){return e("#links").remove()}}),n=e(".wpcf7 form")[0],e(n).attr("action",t+e(n).attr("action")),e.wpcf7Init()):void 0},p=new o,p.get(""+t+"/?json=get_page_index",{},function(t){var n,o,r,i,a,u,c,s,l;for(console.log(t),s=t.pages,i=0,u=s.length;u>i;i++){for(r=s[i],f(r.attachments),n=[],l=r.categories,a=0,c=l.length;c>a;a++)o=l[a],n.push("category-"+o.slug);pages.create({slug:r.slug,name:r.title,categories:n}),e("#"+r.slug+"_content")[0].innerHTML=r.content}return h()}),pages.create({slug:"blog",name:"Blog"}),p.get(""+t+"/?json=1",{},function(t){var n,o,r,i;for(i=t.posts,o=0,r=i.length;r>o;o++)n=i[o],f(n.attachments),e("#blog_content").append('<section>\n	<h1 class="title">'+n.title+'</h1>\n	<p class="post-info">Posted on <span class="date">'+n.date+'</span> by <span class="author">'+n.author.name+"</span></p>\n	"+n.content+"\n</section>");return h()}),e("nav select").change(function(){return window.location=e(this).find("option:selected").val()})})}).call(this);