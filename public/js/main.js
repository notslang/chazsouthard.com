(function(){var e,t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};e="http://69.55.49.53",require.config({paths:{underscore:"../components/underscore/underscore",backbone:"../components/backbone/backbone",jquery:"../components/jquery/jquery.min",JSONP:"../js/jsonp",fancybox:"../components/fancybox/jquery.fancybox"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},fancybox:{deps:["jquery"]}}}),require(["jquery","JSONP","backbone","fancybox"],function(t,o,r){var a,i,s,c,u,l,p,d,h,g,f,y,m,b;return String.prototype.title_case=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},a=function(e){function o(){return g=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.el=t("nav"),o.prototype.render=function(){var e;return e=this.model.current_page(),document.title=""+e.get("name")+" | Chaz Southard",this.$el.find("#"+e.get("slug")+"_nav").prop("checked",!0),console.log("(nav) page: "+e.get("name"))},o.prototype.added_page=function(e){var t,n;return t=e.get("name"),n=e.get("slug"),this.$el.find(".buttonset").append('<input type="radio" name="nav" value="'+n+'", id="'+n+'_nav")>\n<label for="'+n+'_nav">\n	<a href="#'+n+'">'+t+"</a>\n</label>")},o.prototype.initialize=function(){return _.bindAll(this),this.model.on("change:selected",this.render),this.model.on("add",this.added_page)},o}(r.View),u=function(e){function t(){return f=t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.routes={"*page":"change_page"},t.prototype.change_page=function(e){return""!==e?this.model.change_page(e):void 0},t.prototype.initialize=function(e){return this.model=e.model},t}(r.Router),i=function(e){function t(){return y=t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.defaults={name:"",slug:"",selected:!1,first_load:function(){},on_load:function(){},on_unload:function(){}},t.prototype.sync=function(){return!1},t.prototype.onchange=function(){return this.get("selected")?this.get("on_load").call():this.get("on_unload").call()},t.prototype.initialize=function(){return _.bindAll(this),this.on("change:selected",this.onchange),this.get("first_load").call()},t}(r.Model),s=function(e){function o(){return m=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.render=function(){return this.el.style.display=this.model.get("selected")?"block":"none"},o.prototype.initialize=function(){var e;return _.bindAll(this),this.model.on("change:selected",this.render),this.model.view=this,e=this.model.get("slug"),console.log("loaded "+e,window.navView.el),t(window.navView.el).after('<section id="'+e+'_content">\n</section>'),this.el=t("#"+e+"_content")[0],this.render()},o}(r.View),c=function(e){function t(){return b=t.__super__.constructor.apply(this,arguments)}return n(t,e),t.prototype.model=i,t.prototype.default_page="blog",t.prototype.added_page=function(e){return new s({model:e})},t.prototype.change_page=function(e){var t;t=this.find(function(t){return t.get("slug")===e});try{this.current_page().set({selected:!1})}catch(n){}return null!=t?t.set({selected:!0}):(console.log(""+e+" doesn't exist, redirecting to "+this.default_page+"..."),router.navigate(this.default_page,{trigger:!0,replace:!0}))},t.prototype.current_page=function(){return this.where({selected:!0})[0]},t.prototype.initialize=function(){return _.bindAll(this),this.on("add",this.added_page)},t}(r.Collection),window.pages=new c,window.router=new u({model:pages}),window.navView=new a({model:pages}),p=0,h=2,d=function(){return p++,p===h?(t("#loading").remove(),r.history.start(),""===r.history.fragment&&App.Router.navigate(pages.default_page,{trigger:!0,replace:!0}),t(".gallery").each(function(e){return console.log(this),t(this).find("a").attr("rel","gallery-"+e)}),t(".gallery a").fancybox({nextEffect:"fade",prevEffect:"fade",padding:0,margin:[15,15,40,15],beforeLoad:function(){return this.title=t(this.element).parent().next().html()},afterLoad:function(){var e,n,o,r;if(n=t("#links"),!n.length){for(n=t('<ul id="links">'),e=o=0,r=this.group.length;r>=0?r>o:o>r;e=r>=0?++o:--o)t('<li data-index="'+e+'"><label></label></li>').click(function(){return t.fancybox.jumpto(t(this).data("index"))}).appendTo(n);n.appendTo("body")}return n.find("li").removeClass("active").eq(this.index).addClass("active")},beforeClose:function(){return t("#links").remove()}})):void 0},l=new o,l.get(""+e+"/?json=get_page_index",{},function(e){var n,o,r,a;for(a=e.pages,o=0,r=a.length;r>o;o++)n=a[o],pages.create({slug:n.slug,name:n.title}),t("#"+n.slug+"_content")[0].innerHTML=n.content;return d()}),pages.create({slug:"blog",name:"Blog"}),l.get(""+e+"/?json=1",{},function(e){var n,o,r,a;for(a=e.posts,o=0,r=a.length;r>o;o++)n=a[o],t("#blog_content").append('<section>\n	<h1 class="title">'+n.title+'</h1>\n	<p class="post-info">Posted on <span class="date">'+n.date+'</span> by <span class="author">'+n.author.name+"</span></p>\n	"+n.content+"\n</section>");return d()})})}).call(this);